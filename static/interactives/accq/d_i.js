window.onload=function(){var b=JSON.parse(blarb),c=900,f=500,h=0,j=0,k=b.length;(function(m){var n=d3.select(".quiz-wrapper").insert("h2",":first-child").attr("class","geoquestion").text("What is the capital of ").append("span").classed("headingfont",!0),o=d3.select("div#root").append("svg").attr("width","100%").attr("height",f).attr("viewBox","0 0 900 500").attr("preserveAspectRatio","xMidYMid meet").classed("svg-content",!0).attr("style","background:#BCC5D2"),p=o.append("defs").append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id","solid");p.append("feFlood").attr("flood-color","YELLOW"),p.append("feComposite").attr("in","SourceGraphic");var q=d3.geo.mercator().scale(350).center([20,0]).translate([c/2,f/2]),r=d3.geo.path().projection(q),s=d3.select("div#root").append("div").attr("class","twoCapitalExplain");d3.json("/static/interactives/accq/africa.json",function(t,u){function v(C){function E(W){W.setAttribute("r",15/R+"px")}function F(W){W.setAttribute("r",10/R+"px")}function G(W,X,Y){var Z=document.getElementsByClassName("subunit-"+Y)[0],$=document.getElementsByTagName("circle"),_=document.getElementsByClassName("place-label");if(Array.from($).forEach(function(ca){ca.onclick=function(){},ca.onmouseover=function(){},ca.classList.remove("cursorPointer"),-1==X.indexOf(ca.getAttribute("value"))&&ca.remove()}),Array.from(_).forEach(function(ca){ca.onclick=function(){},ca.classList.remove("cursorPointer"),-1==X.indexOf(ca.getAttribute("value"))&&ca.remove()}),X.includes(W)?(Z.classList.add("answerRight"),j++):Z.classList.add("answerWrong"),(h++,C.notes)){text=C.notes;var aa=s.classed("fade-in",!0).attr("style","z-index:1").on("click",H),ba=aa.append("p").style("background-color","white").attr("id","twoCapText").text(text);ba.append("span").attr("id","twoCapSpan").text(" Click here to continue..."),s}else setTimeout(H,2e3)}function H(){s.text(""),s.attr("style","z-index:-30"),z.transition().duration(1500).attr("transform","translate(0,0) scale( 1,1)");var W=document.getElementsByTagName("circle");Array.from(W).forEach(function(Y){Y.classList.add("fade-out")});var X=document.getElementsByClassName("place-label");Array.from(X).forEach(function(Y){Y.classList.add("fade-out")}),h<m.length?setTimeout(I,1500):J()}function I(){v(m[h])}function J(){z.transition().duration(1500).attr("transform","translate(20,0) scale( 1,1)"),setTimeout(K,3e3)}function K(){d3.select("#root").remove(),d3.select(".geoquestion").remove();var W=document.getElementsByClassName("quiz-wrapper")[0],X=document.createElement("div");X.classList.add("display-result","fade-in"),X.innerText="You Scored ",W.appendChild(X);var Y=document.createElement("div");Y.classList.add("result"),X.appendChild(Y);var Z=document.createElement("span");Z.classList.add("user-result"),Z.innerText=j,Y.appendChild(Z);var $=document.createElement("span");$.innerText=" / "+k,Y.appendChild($),L(X)}function L(W){var X=document.createElement("div");W.appendChild(X);var Y=document.createElement("div");Y.classList.add("play-next"),X.appendChild(Y);var Z=document.createElement("div");Z.classList.add("replay-quiz"),Y.appendChild(Z);var $=document.createElement("a");$.setAttribute("href",window.location.href),Z.appendChild($);var _=document.createElement("div");_.classList.add("replay-icon"),_.innerText="\u21BA",$.appendChild(_);var aa=document.createElement("div");aa.innerText="Replay Quiz",aa.setAttribute("style","margin-top:6%;text-align:center"),Z.append(aa)}d3.selectAll("circle").remove(),d3.selectAll(".place-text").remove();var M=document.getElementsByClassName("subunit-"+C.country)[0].getBBox(),N=M.width,O=M.height,P=(M.x+M.x+M.width)/2,Q=(M.y+M.y+M.height)/2,R=.9/Math.max(N/c,O/f),T=C.options,U=C.country,V=C.capital;n.text(U+"?"),document.getElementsByClassName("subunit-"+C.country)[0].setAttribute("style","fill:#183B77"),z.transition().duration(1500).attr("transform","translate("+[c/2-R*P,f/2-R*Q]+")scale("+R+")"),setTimeout(function(){var W="http://www.w3.org/2000/svg";for(i=0;i<T.length;i++){var X=q(T[i].coords),Y=T[i].place,Z=document.createElementNS(W,"circle");Z.setAttribute("r",10/R+"px"),Z.classList.add("fade-in"),Z.setAttribute("cx",X[0]),Z.setAttribute("cy",X[1]),Z.setAttribute("value",Y),Z.setAttribute("style","stroke-width:"+4/R),Z.onclick=function(ba){target=ba.target.getAttribute("value"),G(target,V,U)},Z.onmouseover=function(ba){target=ba.target,E(target)},Z.onmouseout=function(ba){target=ba.target,F(target)},document.getElementsByTagName("g")[0].append(Z);var $=document.createElementNS(W,"text");$.classList.add("place-label"),$.setAttribute("filter","url(#solid)"),$.setAttribute("transform","translate("+X+")"),$.setAttribute("dy",".3em"),$.setAttribute("dx",".7em"),$.setAttribute("value",Y),$.setAttribute("font-size",23/R),$.onclick=function(ba){target=ba.target.getAttribute("value"),G(target,V,U)};var _="\xA0"+T[i].place+"\xA0",aa=document.createTextNode(_);$.appendChild(aa),document.getElementsByTagName("g")[0].append($)}},1e3)}d3.select("#loader").remove();var w=topojson.feature(u,u.objects.subunits),z=o.append("g"),A=z.selectAll(".subunits").data(w.features).enter().append("path").attr("class",function(C){return"feature subunit-"+C.properties.name}).attr("d",r),B=o.append("text");v(m[h])})})(b)};